{% extends "signage/base.html" %}
{% load static %}

{% block css %}
  <link rel="stylesheet" href="{% static "css/signage.css" %}">
{% endblock css %}

{% block ng_app %}signage{% endblock ng_app %}

{% block content %}
  {% verbatim %}
  <span ng-controller="ContentController">
    <div ng-if="!hasVideo()">
      <img bg-image class="slide" ng-repeat="slide in slideService.slides" ng-if="slideService.isCurrentSlide($index)" ng-src="{{ slide.image }}">
    </div>
    <div ng-if="hasVideo()">
      <video play-video></video>
    </div>
  </span>
  {% endverbatim %}
{% endblock content %}

{% block javascript %}
  <script src="//code.jquery.com/jquery-3.1.0.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.8/angular.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.8/angular-animate.js"></script>
  <script src="https://cdn.jsdelivr.net/hls.js/latest/hls.min.js"></script>
  <script src="{% static "djng/js/django-angular.js" %}"></script>
  <script src="{% static "app/app.js" %}"></script>
  <script src="{% static "app/slide/slide.js" %}"></script>
  <script src="{% static "app/video/video.js" %}"></script>
  <script>
    angular.module('signage.context', [])
      .factory('displayContext', function() {
        return {
          pk: "{{ display.pk }}",
          interval: "{{ display.update_interval }}",
        }
      });
  </script>
{% endblock javascript %}
